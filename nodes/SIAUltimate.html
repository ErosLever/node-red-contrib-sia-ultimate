<script type="text/javascript">
	RED.nodes.registerType('SIAUltimate', {
		category: 'SIA Ultimate',
		color: '#75BEFF',
		defaults: {
			name: { value: "" },
			topic: { value: "" },
			server: { type: "siaendpoint-config", required: true },
			discardAutomaticTest: { value: "yes" }
		},
		inputs: 0,
		outputs: 2,
		outputLabels: function (i) {
			var ret = "";
			switch (i) {
				case 0:
					return "Payload";
					break;
				case 1:
					return "Error";
					break;
				default:
					break;
			}
		},
		icon: "font-awesome/fa-bell",
		label:
			function () {
				var label = "SIA-DCS"
				if (this.name !== undefined && this.name.length > 0) {
					label = this.name;
				}
				return label;// + " " + this.status;
			},
		paletteLabel: function () {
			return "SIA-DCS";
		},
		oneditprepare: function () {
			var node = this;

			

		},
		oneditsave: function () {

		}
	});


</script>

<script type="text/html" data-template-name="SIAUltimate">
	<div class="form-row">
		<b>SIA Ultimate node</b>
        <br/>
		<br/>
		
		<label for="node-input-server">Server</label>
		<input type="text" id="node-input-server" />
	</div>
	<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
	<div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Node topic</label>
        <input type="text" id="node-input-topic" placeholder="Node's own topic">
	</div>
	
	

	<br/><b>FILTERS</b><br/><br/>
        
	<div class="form-row">
        <label for="node-input-discardAutomaticTest"><i class="fa fa-tasks"></i> Discard test messages</label>
		<select id="node-input-discardAutomaticTest">
			<option value="yes">Yes, discard automatic test messages sent by the device</option>
			<option value="no">No</option>
		</select>
	</div>
	
  
</script>

<script type="text/markdown" data-help-name="SIAUltimate">
The SIA-DCS node listens from incoming SIA messages from your alarm device.

Everytime a SIA message arrives, the node decodes it and outputs it to the flow.  

**NODE CONFIGURATION**
|Property|Description|
|--|--|
| Server | Choose the server from the list, or add a new one.|
| Name | Choose the name you want. This is the node name. |
| Node | This is the node topic. Choose what you want. |
| Filters | *Discard test messages*: your alarm panel can send an automatic test message once a time, to check that the SIA-DCS node is connected. You can avoid the node sending a msg to the flow everytime this automatuc test message is received. The node will still emit an ERROR message on the PIN 2, if it doesn't receive any message during the period specified in the *Emit error if no messages arrive within seconds* parameter. |

### Outputs

1. Standard output PIN 1
: payload (json) : the standard output of the command.

2. Standard error PIN 2
: payload (json) : the standard error of the command.


<br/>

[Find it useful?](https://www.paypal.me/techtoday)

<br/>	
</script>